=======
Cpan Modules:
    Moose
    DBIx::Class
    JSON
    Modern::Perl
    DBIx::Class::Schema::Loader

=======
DB: SQLite

=======
Command line tool:
    warehouse_tool.pl
    load_dbix.pl
Lib:
    lib/WarehouseAPI.pm
    lib/WarehouseAPI/*.pm
Schema:
    lib/Schema/Result/*.pm (generated by load_dbix.pl)
DB file:
    warehouse.db

=======
Usage Examples:

################# 
# new_warehouse #
#################

$ perl warehouse_tool.pl --option new_warehouse --warehouse_name warehouse
Success! Result:
{"name":"warehouse","warehouse_id":1}

$  perl warehouse_tool.pl --option new_warehouse --warehouse_name warehouse
warehouse_name warehouse is existing with id 1 at lib/WarehouseAPI/WarehouseObj.pm line 58.

################# 
# add_inventory #
#################

$ perl warehouse_tool.pl --option add_inventory --upc abc
ERROR: Item quantity is needed to add item to inventory! at lib/WarehouseAPI.pm line 59.

$ perl warehouse_tool.pl --option add_inventory --upc abc --quantity 25 --warehouse_name warehouse --price 10
Success! Result:
{"added_quantity":25,"UPC":"abc","total_reserved":0,"warehouse_name":"warehouse","total_available":25,"price":"$10"}

$ perl warehouse_tool.pl --option add_inventory --upc 123 --quantity 75 --warehouse_name warehouse --price 25
Success! Result:
{"total_reserved":0,"added_quantity":75,"UPC":"123","total_available":75,"warehouse_name":"warehouse","price":"$25"}

###################
# check_inventory #
###################

$ perl warehouse_tool.pl --option check_available --upc 123
ERROR: Warehouse_name is needed to check availability! at lib/WarehouseAPI.pm line 78.

$ perl warehouse_tool.pl --option check_available --upc 123 --warehouse_name warehouse
Success! Result:
{"reserved_quantity":0,"available_quantity":75,"warehouse_name":"warehouse","UPC":"123","price":"$25"}

###############
# place_order #
###############

$ perl warehouse_tool.pl --option place_order --upc 123 --warehouse_name warehouse --quantity 500
ERROR: Cannot locate enough inventory for this item, only 70 is available at lib/WarehouseAPI/OrderObj.pm line 255.

$ perl warehouse_tool.pl --option place_order --upc 123 --warehouse_name warehouse
ERROR: Quantity is needed to place an order! at lib/WarehouseAPI.pm line 94.

$ perl warehouse_tool.pl --option place_order --upc 123 --warehouse_name warehouse --quantity 5
Success! Result:
{"order_detail":[{"price":"$25","UPC":"123","quantity":5}],"warehouse":"warehouse","sub_total":"$125","order_status":"open","order_id":1}

**** Result, please notice the quantity change ****
$ perl warehouse_tool.pl --option check_available --upc 123 --warehouse_name warehouse
Success! Result:
{"reserved_quantity":5,"available_quantity":70,"UPC":"123","price":"$25","warehouse_name":"warehouse"}

##########################
# add_more_item to order #
##########################

$ perl warehouse_tool.pl --option add_order_item --upc abc --warehouse_name warehouse --quantity 90 --order_id 2
ERROR: Cannot locate enough inventory for this item, only 20 is available at lib/WarehouseAPI/OrderObj.pm line 255.

$ perl warehouse_tool.pl --option add_order_item --upc abc --warehouse_name warehouse --quantity 5
ERROR: Order_id is needed to update an order! at lib/WarehouseAPI.pm line 110.

$ perl warehouse_tool.pl --option add_order_item --upc abc --warehouse_name warehouse --quantity 5 --order_id 1
Success! Result:
{"sub_total":"$175","order_detail":[{"quantity":5,"price":"$25","UPC":"123"},{"quantity":5,"UPC":"abc","price":"$10"}],"order_status":"open","order_id":1,"warehouse":"warehouse"}

**** Result, please notice the quantity change ****
$ perl warehouse_tool.pl --option check_available --upc abc --warehouse_name warehouse
Success! Result:
{"warehouse_name":"warehouse","UPC":"abc","reserved_quantity":5,"price":"$10","available_quantity":20}


###############
# check order #
###############

$ perl warehouse_tool.pl --option check_order 
ERROR: Order_id is needed to check an order! at lib/WarehouseAPI.pm line 128.

$ perl warehouse_tool.pl --option check_order --order_id 1
Success! Result:
{"sub_total":"$175","order_detail":[{"quantity":5,"UPC":"123","price":"$25"},{"UPC":"abc","price":"$10","quantity":5}],"order_id":1,"warehouse":"warehouse","order_status":"open"}

###############
# Ship order #
###############

$ perl warehouse_tool.pl --option ship_order 
ERROR: Order_id is needed to ship an order! at lib/WarehouseAPI.pm line 151.

$ perl warehouse_tool.pl --option ship_order --order_id 1
Success! Result:
{"order_detail":[{"quantity":5,"price":"$25","UPC":"123"},{"price":"$10","UPC":"abc","quantity":5}],"order_id":1,"sub_total":"$175","order_status":"shipped","warehouse":"warehouse"}

**** Result, please notice the quantity change ****
Success! Result:
{"warehouse_name":"warehouse","reserved_quantity":0,"available_quantity":20,"price":"$10","UPC":"abc"}

$ perl warehouse_tool.pl --option add_order_item --upc abc --warehouse_name warehouse --quantity 90 --order_id 1
ERROR: Order has been shipped, cannot add item to order! at lib/WarehouseAPI/OrderObj.pm line 113.

$ perl warehouse_tool.pl --option check_order --order_id 1
Success! Result:
{"warehouse":"warehouse","sub_total":"$175","order_detail":[{"quantity":5,"price":"$25","UPC":"123"},{"quantity":5,"UPC":"abc","price":"$10"}],"order_status":"shipped","order_id":1}


################
# Cancel order #
################

$ perl warehouse_tool.pl --option cancel_order 
ERROR: Order_id is needed to Cancel an order! at lib/WarehouseAPI.pm line 139.

**** Before ****
$ perl warehouse_tool.pl --option check_available --upc 123 --warehouse_name warehouse
Success! Result:
{"UPC":"123","warehouse_name":"warehouse","price":"$25","available_quantity":65,"reserved_quantity":5}

**** Cancel ****
$ perl warehouse_tool.pl --option cancel_order --order_id 2
Success! Result:
{"sub_total":"$375","order_id":2,"warehouse":"warehouse","order_status":"canceled","order_detail":[{"price":"$25","quantity":15,"UPC":"123"}]}

**** After ****
$ perl warehouse_tool.pl --option check_available --upc 123 --warehouse_name warehouse
Success! Result:
{"UPC":"123","warehouse_name":"warehouse","price":"$25","available_quantity":70,"reserved_quantity":0}

$ perl warehouse_tool.pl --option check_order --order_id 3
Success! Result:
{"order_detail":[{"quantity":15,"UPC":"123","price":"$25"}],"order_status":"canceled","warehouse":"warehouse","order_id":3,"sub_total":"$375"}